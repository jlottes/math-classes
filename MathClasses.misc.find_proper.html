<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>MathClasses.misc.find_proper</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library MathClasses.misc.find_proper</h1>

<div class="code">
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="MathClasses.interfaces.canonical_names.html#"><span class="id" type="library">canonical_names</span></a> <a class="idref" href="MathClasses.misc.restrict_rel.html#"><span class="id" type="library">restrict_rel</span></a>.<br/>

<br/>
</div>

<div class="doc">
A database of declared signatures of functions, associated with the head.
    <span class="inlinecode"><a class="idref" href="MathClasses.metric.uniform_continuity.html#S"><span class="id" type="abbreviation">S</span></a></span> should be <span class="inlinecode">∀</span> <span class="inlinecode"><a class="idref" href="MathClasses.implementations.affinely_extended_ring.html#a"><span class="id" type="variable">a</span></a></span> <span class="inlinecode"><a class="idref" href="MathClasses.metric.rationals.html#contents.b"><span class="id" type="variable">b</span></a></span> <span class="inlinecode">...,</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a></span> <span class="inlinecode"><a class="idref" href="MathClasses.implementations.the_reals.html#TheReals.R"><span class="id" type="definition">R</span></a></span> <span class="inlinecode">(<a class="idref" href="MathClasses.theory.rationals.html#f"><span class="id" type="abbreviation">f</span></a></span> <span class="inlinecode"><a class="idref" href="MathClasses.implementations.affinely_extended_ring.html#x"><span class="id" type="variable">x</span></a></span> <span class="inlinecode"><a class="idref" href="MathClasses.implementations.affinely_extended_ring.html#y"><span class="id" type="variable">y</span></a></span> <span class="inlinecode">...)</span>.
    More than one signature can be declared per head.
    The first instance tried has <span class="inlinecode"><a class="idref" href="MathClasses.theory.archimedean_ordered_field.html#i"><span class="id" type="variable">i</span></a>=0</span>, the second has <span class="inlinecode"><a class="idref" href="MathClasses.theory.archimedean_ordered_field.html#i"><span class="id" type="variable">i</span></a>=1</span>, etc.

<div class="paragraph"> </div>

    It is important that the signature is declared using something like

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" type="keyword">Hint</span></span> <span class="inlinecode"><span class="id" type="keyword">Extern</span></span> <span class="inlinecode">0</span> <span class="inlinecode">(<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Signature"><span class="id" type="record">Find_Proper_Signature</span></a></span> <span class="inlinecode">(@<a class="idref" href="MathClasses.theory.rationals.html#f"><span class="id" type="abbreviation">f</span></a>)</span> <span class="inlinecode">0</span> <span class="inlinecode"><span class="id" type="var">_</span>)</span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" type="tactic">eexact</span></span> <span class="inlinecode"><span class="id" type="var">f_proper</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">typeclass_instances</span></span>

<div class="paragraph"> </div>

    as otherwise any term convertible with @f will be found.
    (For example, @mult, @plus, and @sg_op are all convertible).
 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Class</span> <a name="Find_Proper_Signature"><span class="id" type="record">Find_Proper_Signature</span></a> {<span class="id" type="var">T</span>} (<span class="id" type="var">head</span>:<a class="idref" href="MathClasses.misc.find_proper.html#T"><span class="id" type="variable">T</span></a>) (<span class="id" type="var">i</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) <span class="id" type="var">S</span> := <a name="find_proper_sig"><span class="id" type="projection">find_proper_sig</span></a> : <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>.<br/>
<span class="id" type="var">Arguments</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sig"><span class="id" type="definition">find_proper_sig</span></a> {<span class="id" type="var">T</span> <span class="id" type="var">head</span> <span class="id" type="var">i</span> <span class="id" type="var">S</span>} <span class="id" type="var">Find_Proper_Signature</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">find_proper_count_aux</span> <span class="id" type="var">i</span> <span class="id" type="var">h</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">i</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">let</span> <span class="id" type="var">s</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">_</span>:<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Signature"><span class="id" type="class">Find_Proper_Signature</span></a> <span class="id" type="var">h</span> <span class="id" type="var">i</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">find_proper_count_aux</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) <span class="id" type="var">h</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="var">i</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">find_proper_count</span> <span class="id" type="var">h</span> := <span class="id" type="var">find_proper_count_aux</span> <span class="id" type="var">O</span> <span class="id" type="var">h</span>.<br/>

<br/>

<br/>

<br/>
</div>

<div class="doc">
To deal with partial applications, the tactic needs to synthesize
    reflexivity statements. We use the following copies of Proper and Reflexive
    for this. The redundancy is to keep tight control over the search size. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Class</span> <a name="Find_Proper_Proper"><span class="id" type="record">Find_Proper_Proper</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) (<span class="id" type="var">x</span>:<a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) := <a name="find_proper_proper"><span class="id" type="projection">find_proper_proper</span></a> : <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>.<br/>
<span class="id" type="var">Arguments</span> <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Proper"><span class="id" type="class">Find_Proper_Proper</span></a> {<span class="id" type="var">A</span>}%<span class="id" type="var">type</span> <span class="id" type="var">R</span>%<span class="id" type="var">signature</span> <span class="id" type="var">x</span>.<br/>

<br/>
<span class="id" type="keyword">Class</span> <a name="Find_Proper_Reflexive"><span class="id" type="record">Find_Proper_Reflexive</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) := <a name="find_proper_refl"><span class="id" type="projection">find_proper_refl</span></a> <span class="id" type="var">x</span><br/>
&nbsp;&nbsp;:&gt; <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Proper"><span class="id" type="class">Find_Proper_Proper</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>.<br/>

<br/>
</div>

<div class="doc">
Next we exploit any of the following declared relationships between
    relations to convert a declared signature to the one being sought.

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Class</span> <a name="Find_Proper_Symmetric"><span class="id" type="record">Find_Proper_Symmetric</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) := <a name="find_proper_sym"><span class="id" type="projection">find_proper_sym</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.RelationClasses.html#Symmetric"><span class="id" type="class">Symmetric</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>.<br/>
<span class="id" type="keyword">Class</span> <a name="Find_Proper_Subrelation"><span class="id" type="record">Find_Proper_Subrelation</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R1</span> <span class="id" type="var">R2</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) := <a name="find_proper_sub"><span class="id" type="projection">find_proper_sub</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.RelationClasses.html#subrelation"><span class="id" type="class">subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R1"><span class="id" type="variable">R1</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R2"><span class="id" type="variable">R2</span></a>.<br/>

<br/>
<span class="id" type="keyword">Class</span> <a name="Find_Proper_PrePartialOrder"><span class="id" type="record">Find_Proper_PrePartialOrder</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">eq</span> <span class="id" type="var">le</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;{ <a name="find_proper_pporder_sym"><span class="id" type="projection">find_proper_pporder_sym</span></a>     :&gt; <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#eq"><span class="id" type="variable">eq</span></a><br/>
&nbsp;&nbsp;; <a name="find_proper_pporder_sub"><span class="id" type="projection">find_proper_pporder_sub</span></a>     :&gt; <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#eq"><span class="id" type="variable">eq</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#le"><span class="id" type="variable">le</span></a><br/>
&nbsp;&nbsp;; <a name="find_proper_antisym"><span class="id" type="projection">find_proper_antisym</span></a>         : <a class="idref" href="MathClasses.interfaces.canonical_names.html#AntiSymmetric"><span class="id" type="class">AntiSymmetric</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#eq"><span class="id" type="variable">eq</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#le"><span class="id" type="variable">le</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
A starting set of instances of the above properties. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Reflexive"><span class="id" type="class">Find_Proper_Reflexive</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic.html#eq"><span class="id" type="inductive">eq</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>). <span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">firstorder</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">A</span> (<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Reflexive"><span class="id" type="class">Find_Proper_Reflexive</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">},</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic.html#eq"><span class="id" type="inductive">eq</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intros</span> ??? ?? <span class="id" type="var">E</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">E</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_refl"><span class="id" type="definition">find_proper_refl</span></a>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Instance</span>: <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Reflexive"><span class="id" type="class">Find_Proper_Reflexive</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#impl"><span class="id" type="definition">impl</span></a>. <span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">firstorder</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Instance</span>: <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Reflexive"><span class="id" type="class">Find_Proper_Reflexive</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic.html#iff"><span class="id" type="definition">iff</span></a>. <span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">firstorder</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Reflexive"><span class="id" type="class">Find_Proper_Reflexive</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.RelationClasses.html#subrelation"><span class="id" type="class">subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>). <span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">firstorder</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Reflexive"><span class="id" type="class">Find_Proper_Reflexive</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.RelationClasses.html#relation_equivalence"><span class="id" type="definition">relation_equivalence</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>). <span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">firstorder</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic.html#eq"><span class="id" type="inductive">eq</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>). <span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">firstorder</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Instance</span>: <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_PrePartialOrder"><span class="id" type="class">Find_Proper_PrePartialOrder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic.html#iff"><span class="id" type="definition">iff</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#impl"><span class="id" type="definition">impl</span></a>. <span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">firstorder</span>. <span class="id" type="keyword">Qed</span>.<br/>
<span class="id" type="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_PrePartialOrder"><span class="id" type="class">Find_Proper_PrePartialOrder</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.RelationClasses.html#relation_equivalence"><span class="id" type="definition">relation_equivalence</span></a>) (@<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.RelationClasses.html#subrelation"><span class="id" type="class">subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>).<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intro</span>. <span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <span class="id" type="var">_</span>; <span class="id" type="tactic">firstorder</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The restriction of a relation to some subset (<span class="inlinecode"><a class="idref" href="MathClasses.misc.restrict_rel.html#restrict_rel"><span class="id" type="section">restrict_rel</span></a></span>) is used ubiquitously.
    Apart from reflexivity, all of the above properties lift to restricted relations. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="restrict_rel_sub_fp"><span class="id" type="lemma">restrict_rel_sub_fp</span></a> `(<span class="id" type="var">S</span>:<span class="id" type="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="keyword">Prop</span>) (<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>): <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> (<a class="idref" href="MathClasses.interfaces.canonical_names.html#restrict_rel"><span class="id" type="definition">restrict_rel</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>)%<span class="id" type="var">signature</span> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>. <span class="id" type="keyword">Proof</span> <a class="idref" href="MathClasses.misc.restrict_rel.html#restrict_rel_sub"><span class="id" type="lemma">restrict_rel_sub</span></a> <span class="id" type="var">S</span> <span class="id" type="var">R</span>.<br/>
<span class="id" type="keyword">Lemma</span> <a name="restrict_rel_sym_fp"><span class="id" type="lemma">restrict_rel_sym_fp</span></a> `(<span class="id" type="var">S</span>:<span class="id" type="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="keyword">Prop</span>) (<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) {<span class="id" type="var">sym</span>:<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>}: <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> (<a class="idref" href="MathClasses.interfaces.canonical_names.html#restrict_rel"><span class="id" type="definition">restrict_rel</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>). <span class="id" type="keyword">Proof</span> @<a class="idref" href="MathClasses.misc.restrict_rel.html#restrict_rel_sym"><span class="id" type="lemma">restrict_rel_sym</span></a> <span class="id" type="var">_</span> <span class="id" type="var">S</span> <span class="id" type="var">R</span> <span class="id" type="var">sym</span>.<br/>
<span class="id" type="keyword">Hint Extern</span> 0 (@<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <span class="id" type="var">_</span> (@<a class="idref" href="MathClasses.interfaces.canonical_names.html#restrict_rel"><span class="id" type="definition">restrict_rel</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> ?<span class="id" type="var">R</span>) ?<span class="id" type="var">R</span>) ⇒ <span class="id" type="tactic">eapply</span> @<a class="idref" href="MathClasses.misc.find_proper.html#restrict_rel_sub_fp"><span class="id" type="lemma">restrict_rel_sub_fp</span></a> : <span class="id" type="var">typeclass_instances</span>.<br/>
<span class="id" type="keyword">Hint Extern</span> 4 (@<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> <span class="id" type="var">_</span> (@<a class="idref" href="MathClasses.interfaces.canonical_names.html#restrict_rel"><span class="id" type="definition">restrict_rel</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>)) ⇒ <span class="id" type="tactic">eapply</span> @<a class="idref" href="MathClasses.misc.find_proper.html#restrict_rel_sym_fp"><span class="id" type="lemma">restrict_rel_sym_fp</span></a> : <span class="id" type="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="restrict_sub_sub_fp"><span class="id" type="lemma">restrict_sub_sub_fp</span></a> `(<span class="id" type="var">S</span>:<span class="id" type="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="keyword">Prop</span>) (<span class="id" type="var">R1</span> <span class="id" type="var">R2</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) {<span class="id" type="var">sub</span>:<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R1"><span class="id" type="variable">R1</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R2"><span class="id" type="variable">R2</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> (<a class="idref" href="MathClasses.interfaces.canonical_names.html#restrict_rel"><span class="id" type="definition">restrict_rel</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R1"><span class="id" type="variable">R1</span></a>) (<a class="idref" href="MathClasses.interfaces.canonical_names.html#restrict_rel"><span class="id" type="definition">restrict_rel</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R2"><span class="id" type="variable">R2</span></a>).<br/>
<span class="id" type="keyword">Proof</span> <a class="idref" href="MathClasses.misc.restrict_rel.html#restrict_sub_sub"><span class="id" type="lemma">restrict_sub_sub</span></a> <span class="id" type="var">S</span> <span class="id" type="var">R1</span> <span class="id" type="var">R2</span> (<span class="id" type="var">sub</span>:=<span class="id" type="var">sub</span>).<br/>

<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="restrict_ppo_fp"><span class="id" type="lemma">restrict_ppo_fp</span></a> `(<span class="id" type="var">S</span>:<span class="id" type="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="keyword">Prop</span>) (<span class="id" type="var">eq</span> <span class="id" type="var">le</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_PrePartialOrder"><span class="id" type="class">Find_Proper_PrePartialOrder</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#eq"><span class="id" type="variable">eq</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#le"><span class="id" type="variable">le</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_PrePartialOrder"><span class="id" type="class">Find_Proper_PrePartialOrder</span></a> (<a class="idref" href="MathClasses.interfaces.canonical_names.html#restrict_rel"><span class="id" type="definition">restrict_rel</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#eq"><span class="id" type="variable">eq</span></a>) (<a class="idref" href="MathClasses.interfaces.canonical_names.html#restrict_rel"><span class="id" type="definition">restrict_rel</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#le"><span class="id" type="variable">le</span></a>).<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">pose</span> <span class="id" type="var">proof</span> (<a class="idref" href="MathClasses.misc.find_proper.html#find_proper_antisym"><span class="id" type="method">find_proper_antisym</span></a> (<span class="id" type="var">eq</span>:=<span class="id" type="var">eq</span>)). <span class="id" type="tactic">split</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#restrict_sub_sub_fp"><span class="id" type="lemma">restrict_sub_sub_fp</span></a>. <span class="id" type="tactic">apply</span> <span class="id" type="var">_</span>. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.restrict_rel.html#restrict_antisym"><span class="id" type="lemma">restrict_antisym</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
The tactic for partial applications, which uses reflexivity. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="cut_proper_refl"><span class="id" type="lemma">cut_proper_refl</span></a> `{<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <span class="id" type="var">A</span>} <span class="id" type="var">x</span> `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Proper"><span class="id" type="class">Find_Proper_Proper</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>} `{<span class="id" type="var">R'</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <span class="id" type="var">B</span>} {<span class="id" type="var">f</span>}<br/>
&nbsp;&nbsp;(<span class="id" type="var">p</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> (<a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'==>'_x"><span class="id" type="notation">==&gt;</span></a><a class="idref" href="MathClasses.misc.find_proper.html#R'"><span class="id" type="variable">R'</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R'"><span class="id" type="variable">R'</span></a> (<a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>).<br/>
<span class="id" type="keyword">Proof</span> <span class="id" type="var">p</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_proper"><span class="id" type="definition">find_proper_proper</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="cut_proper_refl_flip"><span class="id" type="lemma">cut_proper_refl_flip</span></a> `{<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <span class="id" type="var">A</span>} <span class="id" type="var">x</span> `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Proper"><span class="id" type="class">Find_Proper_Proper</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>} `{<span class="id" type="var">R'</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <span class="id" type="var">B</span>} {<span class="id" type="var">f</span>}<br/>
&nbsp;&nbsp;(<span class="id" type="var">p</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> (<a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'-->'_x"><span class="id" type="notation">--&gt;</span></a><a class="idref" href="MathClasses.misc.find_proper.html#R'"><span class="id" type="variable">R'</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R'"><span class="id" type="variable">R'</span></a> (<a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>).<br/>
<span class="id" type="keyword">Proof</span> <span class="id" type="var">p</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> (<a class="idref" href="MathClasses.misc.find_proper.html#find_proper_proper"><span class="id" type="definition">find_proper_proper</span></a> (<span class="id" type="var">R</span>:=<span class="id" type="var">R</span>)).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">cut_proper</span> <span class="id" type="var">p</span> <span class="id" type="var">x</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> (?<span class="id" type="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'-->'_x"><span class="id" type="notation">--&gt;</span></a> <span class="id" type="var">_</span>) <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#cut_proper_refl_flip"><span class="id" type="lemma">cut_proper_refl_flip</span></a> <span class="id" type="var">x</span> <span class="id" type="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> (?<span class="id" type="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'==>'_x"><span class="id" type="notation">==&gt;</span></a> <span class="id" type="var">_</span>) <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#cut_proper_refl"><span class="id" type="lemma">cut_proper_refl</span></a> <span class="id" type="var">x</span> <span class="id" type="var">p</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">trim_proper</span> <span class="id" type="var">n</span> <span class="id" type="var">p</span> <span class="id" type="var">expr</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a> ⇒ <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> ?<span class="id" type="var">m</span> ⇒ <span class="id" type="keyword">match</span> <span class="id" type="var">expr</span> <span class="id" type="keyword">with</span> ?<span class="id" type="var">f</span> ?<span class="id" type="var">x</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">p'</span> := <span class="id" type="var">trim_proper</span> <span class="id" type="var">m</span> <span class="id" type="var">p</span> <span class="id" type="var">f</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">cut_proper</span> <span class="id" type="var">p'</span> <span class="id" type="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The tactic for converting one signature to another. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="chain_conv"><span class="id" type="lemma">chain_conv</span></a> {<span class="id" type="var">A</span> <span class="id" type="var">B</span>} {<span class="id" type="var">R1</span> <span class="id" type="var">S1</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>} {<span class="id" type="var">R2</span> <span class="id" type="var">S2</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#B"><span class="id" type="variable">B</span></a>}<br/>
&nbsp;&nbsp;(<span class="id" type="var">c1</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S1"><span class="id" type="variable">S1</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R1"><span class="id" type="variable">R1</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" type="var">c2</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">f</span> <span class="id" type="var">g</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R2"><span class="id" type="variable">R2</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S2"><span class="id" type="variable">S2</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a>)<br/>
&nbsp;&nbsp;<span class="id" type="var">f</span> <span class="id" type="var">g</span> : (<a class="idref" href="MathClasses.misc.find_proper.html#R1"><span class="id" type="variable">R1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a><a class="idref" href="MathClasses.misc.find_proper.html#R2"><span class="id" type="variable">R2</span></a>)%<span class="id" type="var">signature</span> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> (<a class="idref" href="MathClasses.misc.find_proper.html#S1"><span class="id" type="variable">S1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a><a class="idref" href="MathClasses.misc.find_proper.html#S2"><span class="id" type="variable">S2</span></a>)%<span class="id" type="var">signature</span> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> ???. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <span class="id" type="var">c2</span>, <span class="id" type="var">P</span>, <span class="id" type="var">c1</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="chain_invert_conv"><span class="id" type="lemma">chain_invert_conv</span></a> {<span class="id" type="var">A</span> <span class="id" type="var">B</span>} {<span class="id" type="var">R1</span> <span class="id" type="var">S1</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>} {<span class="id" type="var">R2</span> <span class="id" type="var">S2</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#B"><span class="id" type="variable">B</span></a>}<br/>
&nbsp;&nbsp;(<span class="id" type="var">c1</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S1"><span class="id" type="variable">S1</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R1"><span class="id" type="variable">R1</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" type="var">c2</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">f</span> <span class="id" type="var">g</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R2"><span class="id" type="variable">R2</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S2"><span class="id" type="variable">S2</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a>)<br/>
&nbsp;&nbsp;<span class="id" type="var">f</span> <span class="id" type="var">g</span> : (<a class="idref" href="MathClasses.misc.find_proper.html#R1"><span class="id" type="variable">R1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a><a class="idref" href="MathClasses.misc.find_proper.html#R2"><span class="id" type="variable">R2</span></a>)%<span class="id" type="var">signature</span> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> (<a class="idref" href="MathClasses.misc.find_proper.html#S1"><span class="id" type="variable">S1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a><a class="idref" href="MathClasses.misc.find_proper.html#S2"><span class="id" type="variable">S2</span></a>)%<span class="id" type="var">signature</span> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> ???. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <span class="id" type="var">c2</span>, <span class="id" type="var">P</span>, <span class="id" type="var">c1</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="chain_join_conv"><span class="id" type="lemma">chain_join_conv</span></a> {<span class="id" type="var">A</span> <span class="id" type="var">B</span>} {<span class="id" type="var">R1</span> <span class="id" type="var">S1</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>} {<span class="id" type="var">R2</span> <span class="id" type="var">S2</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#B"><span class="id" type="variable">B</span></a>}<br/>
&nbsp;&nbsp;(<span class="id" type="var">c1</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S1"><span class="id" type="variable">S1</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R1"><span class="id" type="variable">R1</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R1"><span class="id" type="variable">R1</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" type="var">c2</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">f</span> <span class="id" type="var">g</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R2"><span class="id" type="variable">R2</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R2"><span class="id" type="variable">R2</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S2"><span class="id" type="variable">S2</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a>)<br/>
&nbsp;&nbsp;<span class="id" type="var">f</span> <span class="id" type="var">g</span> :   (<a class="idref" href="MathClasses.misc.find_proper.html#R1"><span class="id" type="variable">R1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a><a class="idref" href="MathClasses.misc.find_proper.html#R2"><span class="id" type="variable">R2</span></a>)%<span class="id" type="var">signature</span> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> (<a class="idref" href="MathClasses.misc.find_proper.html#R1"><span class="id" type="variable">R1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a><a class="idref" href="MathClasses.misc.find_proper.html#R2"><span class="id" type="variable">R2</span></a>)%<span class="id" type="var">signature</span> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> (<a class="idref" href="MathClasses.misc.find_proper.html#S1"><span class="id" type="variable">S1</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a><a class="idref" href="MathClasses.misc.find_proper.html#S2"><span class="id" type="variable">S2</span></a>)%<span class="id" type="var">signature</span> <a class="idref" href="MathClasses.misc.find_proper.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#g"><span class="id" type="variable">g</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intros</span> [<span class="id" type="var">P1</span> <span class="id" type="var">P2</span>] <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">E</span>. <span class="id" type="tactic">destruct</span> (<span class="id" type="var">c1</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">E</span>).<br/>
&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">c2</span>; <span class="id" type="tactic">split</span>; [ <span class="id" type="tactic">apply</span> <span class="id" type="var">P1</span> | <span class="id" type="tactic">apply</span> <span class="id" type="var">P2</span>]; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="id_conv"><span class="id" type="definition">id_conv</span></a> `(<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <span class="id" type="var">A</span>) <span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#id"><span class="id" type="definition">id</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="sub_conv"><span class="id" type="definition">sub_conv</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> := <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sub"><span class="id" type="definition">find_proper_sub</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="sub_conv_ff"><span class="id" type="definition">sub_conv_ff</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a>. <span class="id" type="tactic">intros</span>. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sub"><span class="id" type="definition">find_proper_sub</span></a>. <span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Definition</span> <a name="sub_conv_f2"><span class="id" type="definition">sub_conv_f2</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>} `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a>. <span class="id" type="tactic">intros</span>. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sub"><span class="id" type="definition">find_proper_sub</span></a>, <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sym"><span class="id" type="definition">find_proper_sym</span></a>. <span class="id" type="keyword">Defined</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">find_conv</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>                          ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#id_conv"><span class="id" type="definition">id_conv</span></a> <span class="id" type="var">S</span>         : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">R'</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">S'</span>) ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#sub_conv_ff"><span class="id" type="definition">sub_conv_ff</span></a> <span class="id" type="var">R'</span> <span class="id" type="var">S'</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">_</span>          (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">S'</span>) ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#sub_conv_f2"><span class="id" type="definition">sub_conv_f2</span></a> <span class="id" type="var">R</span>  <span class="id" type="var">S'</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>                          ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#sub_conv"><span class="id" type="definition">sub_conv</span></a>    <span class="id" type="var">R</span>  <span class="id" type="var">S</span>  : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="id_flip_conv1"><span class="id" type="definition">id_flip_conv1</span></a> `(<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <span class="id" type="var">A</span>) <span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#id"><span class="id" type="definition">id</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="id_flip_conv2"><span class="id" type="definition">id_flip_conv2</span></a> `(<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <span class="id" type="var">A</span>) <span class="id" type="var">x</span> <span class="id" type="var">y</span> : (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#id"><span class="id" type="definition">id</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="sym_conv"><span class="id" type="definition">sym_conv</span></a> `(<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <span class="id" type="var">A</span>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#::'λ'_x_'..'_x_','_x"><span class="id" type="notation">λ</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#::'λ'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sym"><span class="id" type="definition">find_proper_sym</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="sub_inv_conv_f2"><span class="id" type="definition">sub_inv_conv_f2</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>}  : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a>. <span class="id" type="tactic">intros</span>. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sub"><span class="id" type="definition">find_proper_sub</span></a>. <span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Definition</span> <a name="sub_conv_f1"><span class="id" type="definition">sub_conv_f1</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a>. <span class="id" type="tactic">intros</span>. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sub"><span class="id" type="definition">find_proper_sub</span></a>. <span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Definition</span> <a name="sym_sub_conv"><span class="id" type="definition">sym_sub_conv</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>} `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intros</span>. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sub"><span class="id" type="definition">find_proper_sub</span></a>, <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sym"><span class="id" type="definition">find_proper_sym</span></a>. <span class="id" type="keyword">Defined</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">find_inv_conv</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>                 ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#sym_conv"><span class="id" type="definition">sym_conv</span></a> <span class="id" type="var">S</span>           : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">S'</span>) ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#id_flip_conv1"><span class="id" type="definition">id_flip_conv1</span></a> <span class="id" type="var">S'</span>     : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>                 ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#id_flip_conv2"><span class="id" type="definition">id_flip_conv2</span></a> <span class="id" type="var">S</span>      : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">S'</span>) ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#sub_inv_conv_f2"><span class="id" type="definition">sub_inv_conv_f2</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S'</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">R'</span>) <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#sub_conv_f1"><span class="id" type="definition">sub_conv_f1</span></a> <span class="id" type="var">R'</span> <span class="id" type="var">S</span>     : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>                 ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#sym_sub_conv"><span class="id" type="definition">sym_sub_conv</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S</span>     : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">find_inv_conv_2</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="var">k</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">S</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="var">is_evar</span> <span class="id" type="var">S</span>; <span class="id" type="tactic">first</span> [ <span class="id" type="keyword">let</span> <span class="id" type="var">c</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">R</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">R'</span> ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#id_flip_conv2"><span class="id" type="definition">id_flip_conv2</span></a> <span class="id" type="var">R'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#id_flip_conv1"><span class="id" type="definition">id_flip_conv1</span></a> <span class="id" type="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span> <span class="id" type="var">k</span> <span class="id" type="var">c</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">let</span> <span class="id" type="var">c</span> := <span class="id" type="var">find_inv_conv</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="keyword">in</span> <span class="id" type="var">k</span> <span class="id" type="var">c</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="sym_split"><span class="id" type="definition">sym_split</span></a> `(<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <span class="id" type="var">A</span>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>} : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intros</span>. <span class="id" type="tactic">split</span>. <span class="id" type="tactic">assumption</span>. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sym"><span class="id" type="definition">find_proper_sym</span></a>. <span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Definition</span> <a name="sym_sub_split_f"><span class="id" type="definition">sym_sub_split_f</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>} `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intros</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a>. <span class="id" type="tactic">split</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sub"><span class="id" type="definition">find_proper_sub</span></a>. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sym"><span class="id" type="definition">find_proper_sym</span></a>. <span class="id" type="tactic">assumption</span>. <span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Definition</span> <a name="sym_sub_split"><span class="id" type="definition">sym_sub_split</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>} `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intros</span>. <span class="id" type="tactic">split</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sub"><span class="id" type="definition">find_proper_sub</span></a>. <span class="id" type="tactic">assumption</span>. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sym"><span class="id" type="definition">find_proper_sym</span></a>. <span class="id" type="keyword">Defined</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">find_split_conv</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>                 ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#sym_split"><span class="id" type="definition">sym_split</span></a> <span class="id" type="var">S</span>          : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">S'</span>) ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#sym_sub_split_f"><span class="id" type="definition">sym_sub_split_f</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S'</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>                 ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#sym_sub_split"><span class="id" type="definition">sym_sub_split</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S</span>    : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="id_join1"><span class="id" type="definition">id_join1</span></a> `(<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <span class="id" type="var">A</span>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>. <span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">tauto</span>. <span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Definition</span> <a name="id_join2"><span class="id" type="definition">id_join2</span></a> `(<span class="id" type="var">R</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <span class="id" type="var">A</span>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>. <span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">tauto</span>. <span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Definition</span> <a name="ppo_join_f"><span class="id" type="definition">ppo_join_f</span></a>  {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_PrePartialOrder"><span class="id" type="class">Find_Proper_PrePartialOrder</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a>. <span class="id" type="tactic">intros</span> ?? [??]. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_antisym"><span class="id" type="method">find_proper_antisym</span></a>. <span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Definition</span> <a name="ppo_join"><span class="id" type="definition">ppo_join</span></a> {<span class="id" type="var">A</span>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_PrePartialOrder"><span class="id" type="class">Find_Proper_PrePartialOrder</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intros</span> ?? [??]. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_antisym"><span class="id" type="method">find_proper_antisym</span></a>. <span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Definition</span> <a name="ppo_sub_join_f"><span class="id" type="definition">ppo_sub_join_f</span></a>  {<span class="id" type="var">A</span>} {<span class="id" type="var">eq</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_PrePartialOrder"><span class="id" type="class">Find_Proper_PrePartialOrder</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#eq"><span class="id" type="variable">eq</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>}<br/>
&nbsp;&nbsp;`{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#eq"><span class="id" type="variable">eq</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>) <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a>. <span class="id" type="tactic">intros</span> ?? [??]. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sub"><span class="id" type="definition">find_proper_sub</span></a>, <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_antisym"><span class="id" type="method">find_proper_antisym</span></a>. <span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Definition</span> <a name="ppo_sub_join"><span class="id" type="definition">ppo_sub_join</span></a>  {<span class="id" type="var">A</span>} {<span class="id" type="var">eq</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>} (<span class="id" type="var">R</span> <span class="id" type="var">S</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" type="definition">relation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#A"><span class="id" type="variable">A</span></a>) `{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_PrePartialOrder"><span class="id" type="class">Find_Proper_PrePartialOrder</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#eq"><span class="id" type="variable">eq</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a>}<br/>
&nbsp;&nbsp;`{!<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Subrelation"><span class="id" type="class">Find_Proper_Subrelation</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#eq"><span class="id" type="variable">eq</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#R"><span class="id" type="variable">R</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#S"><span class="id" type="variable">S</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intros</span> ?? [??]. <span class="id" type="var">now</span> <span class="id" type="tactic">apply</span> <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sub"><span class="id" type="definition">find_proper_sub</span></a>, <a class="idref" href="MathClasses.misc.find_proper.html#find_proper_antisym"><span class="id" type="method">find_proper_antisym</span></a>. <span class="id" type="keyword">Defined</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">find_join_conv</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>                 ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#id_join1"><span class="id" type="definition">id_join1</span></a> <span class="id" type="var">S</span>           : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>                 ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#id_join2"><span class="id" type="definition">id_join2</span></a> <span class="id" type="var">S</span>           : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">R'</span>) <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#ppo_join_f"><span class="id" type="definition">ppo_join_f</span></a> <span class="id" type="var">S</span> <span class="id" type="var">R'</span>      : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">R'</span>) <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#ppo_sub_join_f"><span class="id" type="definition">ppo_sub_join_f</span></a> <span class="id" type="var">R'</span> <span class="id" type="var">S</span>  : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>                 ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#ppo_join"><span class="id" type="definition">ppo_join</span></a> <span class="id" type="var">S</span> <span class="id" type="var">R</span>         : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>                 ⇒ <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#ppo_sub_join"><span class="id" type="definition">ppo_sub_join</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S</span>     : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'∧'_x"><span class="id" type="notation">∧</span></a> <span class="id" type="var">R</span> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:x_'→'_x"><span class="id" type="notation">→</span></a> <span class="id" type="var">S</span> <a class="idref" href="MathClasses.misc.find_proper.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MathClasses.misc.find_proper.html#y"><span class="id" type="variable">y</span></a>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">build_chain_conv</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="var">k</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (?<span class="id" type="var">R1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;?</span></a><span class="id" type="var">R2</span>)%<span class="id" type="var">signature</span> (?<span class="id" type="var">S1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;?</span></a><span class="id" type="var">S2</span>)%<span class="id" type="var">signature</span> ⇒ <span class="id" type="tactic">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">c1</span> := <span class="id" type="var">find_conv</span> <span class="id" type="var">S1</span> <span class="id" type="var">R1</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">with_c2</span> <span class="id" type="var">c2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">c</span> := <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#chain_conv"><span class="id" type="lemma">chain_conv</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">k</span> <span class="id" type="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">build_chain_conv</span> <span class="id" type="var">R2</span> <span class="id" type="var">S2</span> <span class="id" type="var">with_c2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">let</span> <span class="id" type="var">c</span> := <span class="id" type="var">find_conv</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="keyword">in</span> <span class="id" type="var">k</span> <span class="id" type="var">c</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">build_chain_inv_conv</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="var">k</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (?<span class="id" type="var">R1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;?</span></a><span class="id" type="var">R2</span>)%<span class="id" type="var">signature</span> (?<span class="id" type="var">S1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;?</span></a><span class="id" type="var">S2</span>)%<span class="id" type="var">signature</span> ⇒ <span class="id" type="tactic">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">c1</span> := <span class="id" type="var">find_inv_conv</span> <span class="id" type="var">S1</span> <span class="id" type="var">R1</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">with_c2</span> <span class="id" type="var">c2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">c</span> := <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#chain_invert_conv"><span class="id" type="lemma">chain_invert_conv</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">k</span> <span class="id" type="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">build_chain_inv_conv</span> <span class="id" type="var">R2</span> <span class="id" type="var">S2</span> <span class="id" type="var">with_c2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="var">find_inv_conv_2</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="var">k</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">build_chain_join_conv</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="var">k</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (?<span class="id" type="var">R1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;?</span></a><span class="id" type="var">R2</span>)%<span class="id" type="var">signature</span> (?<span class="id" type="var">S1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;?</span></a><span class="id" type="var">S2</span>)%<span class="id" type="var">signature</span> ⇒ <span class="id" type="tactic">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">c1</span> := <span class="id" type="var">find_split_conv</span> <span class="id" type="var">S1</span> <span class="id" type="var">R1</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">with_c2</span> <span class="id" type="var">c2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">c</span> := <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#chain_join_conv"><span class="id" type="lemma">chain_join_conv</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">k</span> <span class="id" type="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">build_chain_join_conv</span> <span class="id" type="var">R2</span> <span class="id" type="var">S2</span> <span class="id" type="var">with_c2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">let</span> <span class="id" type="var">c</span> := <span class="id" type="var">find_join_conv</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="keyword">in</span> <span class="id" type="var">k</span> <span class="id" type="var">c</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The main tactic follows. 
</div>
<div class="code">

<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">conv_and_apply</span> <span class="id" type="var">bc</span> <span class="id" type="var">p</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span> |- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> ?<span class="id" type="var">S</span> ?<span class="id" type="var">f</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> ?<span class="id" type="var">R</span> ?<span class="id" type="var">g</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">unify</span> <span class="id" type="var">f</span> <span class="id" type="var">g</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">with_c</span> <span class="id" type="var">c</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">p'</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">c</span> <span class="id" type="var">f</span> <span class="id" type="var">f</span> <span class="id" type="var">p</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> <span class="id" type="var">S</span> <span class="id" type="var">f</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eexact</span> <span class="id" type="var">p'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">bc</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="var">with_c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒  <span class="id" type="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">conv_apply</span>     <span class="id" type="var">p</span> := <span class="id" type="var">conv_and_apply</span> <span class="id" type="keyword">ltac</span>:(<span class="id" type="var">build_chain_conv</span>) <span class="id" type="var">p</span>.<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">conv_inv_apply</span> <span class="id" type="var">p</span> := <span class="id" type="var">conv_and_apply</span> <span class="id" type="keyword">ltac</span>:(<span class="id" type="var">build_chain_inv_conv</span>) <span class="id" type="var">p</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">conv_join_apply</span> <span class="id" type="var">p</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span> |- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> ?<span class="id" type="var">S</span> ?<span class="id" type="var">f</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> ?<span class="id" type="var">R</span> ?<span class="id" type="var">g</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">unify</span> <span class="id" type="var">f</span> <span class="id" type="var">g</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">with_c</span> <span class="id" type="var">c</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">p'</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">c</span> <span class="id" type="var">f</span> <span class="id" type="var">f</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic.html#conj"><span class="id" type="constructor">conj</span></a> <span class="id" type="var">p</span> <span class="id" type="var">p</span>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> <span class="id" type="var">S</span> <span class="id" type="var">f</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eexact</span> <span class="id" type="var">p'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">build_chain_join_conv</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="var">with_c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒  <span class="id" type="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">sig_tail_of</span> <span class="id" type="var">s</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">s</span> <span class="id" type="keyword">with</span> | (<span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">?</span></a><span class="id" type="var">t</span>)%<span class="id" type="var">signature</span> ⇒ <span class="id" type="var">sig_tail_of</span> <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="var">s</span> <span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">compare_tails</span> <span class="id" type="var">p</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">t</span>  := <span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> ?<span class="id" type="var">s</span> <span class="id" type="var">_</span> ⇒ <span class="id" type="var">sig_tail_of</span> <span class="id" type="var">s</span> <span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">tg</span> := <span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span> |- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> ?<span class="id" type="var">s</span> <span class="id" type="var">_</span> ⇒ <span class="id" type="var">sig_tail_of</span> <span class="id" type="var">s</span> <span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">tg</span> <span class="id" type="var">t</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">R</span>) ?<span class="id" type="var">R</span> ⇒ <span class="id" type="tactic">first</span> [ <span class="id" type="var">conv_inv_apply</span> <span class="id" type="var">p</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> ?<span class="id" type="var">R</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">R</span>) ⇒ <span class="id" type="tactic">first</span> [ <span class="id" type="var">conv_inv_apply</span> <span class="id" type="var">p</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Logic.html#iff"><span class="id" type="definition">iff</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#impl"><span class="id" type="definition">impl</span></a> ⇒ <span class="id" type="tactic">first</span> [ <span class="id" type="var">conv_join_apply</span> <span class="id" type="var">p</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="var">conv_apply</span> <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="var">conv_inv_apply</span> <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="var">conv_join_apply</span> <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">compare_rel</span> <span class="id" type="var">sym</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="var">k</span> :=<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" type="tactic">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">is_evar</span> <span class="id" type="var">S</span>; <span class="id" type="tactic">first</span> [ <span class="id" type="var">k</span> <span class="id" type="var">sym</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <span class="id" type="var">has_evar</span> <span class="id" type="var">R</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">R</span> <span class="id" type="var">S</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (<a class="idref" href="MathClasses.interfaces.canonical_names.html#restrict_rel"><span class="id" type="definition">restrict_rel</span></a> ?<span class="id" type="var">RS</span> ?<span class="id" type="var">RR</span>) (<a class="idref" href="MathClasses.interfaces.canonical_names.html#restrict_rel"><span class="id" type="definition">restrict_rel</span></a> ?<span class="id" type="var">SS</span> ?<span class="id" type="var">SR</span>) ⇒ <span class="id" type="tactic">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">unify</span> <span class="id" type="var">RS</span> <span class="id" type="var">SS</span>; <span class="id" type="var">compare_rel</span> <span class="id" type="var">sym</span> <span class="id" type="var">RR</span> <span class="id" type="var">SR</span> <span class="id" type="var">k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">_</span> (<a class="idref" href="MathClasses.interfaces.canonical_names.html#restrict_rel"><span class="id" type="definition">restrict_rel</span></a> ?<span class="id" type="var">SS</span> ?<span class="id" type="var">SR</span>) ⇒ <span class="id" type="tactic">first</span> [ <span class="id" type="var">compare_rel</span> <span class="id" type="var">sym</span> <span class="id" type="var">R</span> <span class="id" type="var">SR</span> <span class="id" type="var">k</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (@<a class="idref" href="MathClasses.interfaces.canonical_names.html#equiv"><span class="id" type="definition">equiv</span></a> <span class="id" type="var">_</span> ?<span class="id" type="var">eq1</span>) (@<a class="idref" href="MathClasses.interfaces.canonical_names.html#equiv"><span class="id" type="definition">equiv</span></a> <span class="id" type="var">_</span> ?<span class="id" type="var">eq2</span>) ⇒ <span class="id" type="var">unify</span> <span class="id" type="var">eq1</span> <span class="id" type="var">eq2</span>; <span class="id" type="tactic">first</span> [ <span class="id" type="var">k</span> <span class="id" type="var">sym</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">let</span> <span class="id" type="var">S1</span> := <span class="id" type="keyword">match</span> <span class="id" type="var">R</span> <span class="id" type="keyword">with</span> <a class="idref" href="MathClasses.interfaces.canonical_names.html#SubRelation"><span class="id" type="class">SubRelation</span></a> ?<span class="id" type="var">S</span> ⇒ <span class="id" type="var">S</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> (<a class="idref" href="MathClasses.interfaces.canonical_names.html#SubRelation"><span class="id" type="class">SubRelation</span></a> ?<span class="id" type="var">S</span>) ⇒ <span class="id" type="var">S</span> <span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">S2</span> := <span class="id" type="keyword">match</span> <span class="id" type="var">S</span> <span class="id" type="keyword">with</span> <a class="idref" href="MathClasses.interfaces.canonical_names.html#SubRelation"><span class="id" type="class">SubRelation</span></a> ?<span class="id" type="var">S</span> ⇒ <span class="id" type="var">S</span> | <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> (<a class="idref" href="MathClasses.interfaces.canonical_names.html#SubRelation"><span class="id" type="class">SubRelation</span></a> ?<span class="id" type="var">S</span>) ⇒ <span class="id" type="var">S</span> <span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">unify</span> <span class="id" type="var">S1</span> <span class="id" type="var">S2</span>; <span class="id" type="tactic">first</span> [<span class="id" type="var">k</span> <span class="id" type="var">false</span> | <span class="id" type="tactic">fail</span> 2]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" type="keyword">match</span> <span class="id" type="var">sym</span> <span class="id" type="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a> ⇒ <span class="id" type="tactic">idtac</span> <span class="id" type="keyword">end</span>; <span class="id" type="tactic">first</span> [ <span class="id" type="var">k</span> <span class="id" type="var">false</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <span class="id" type="var">has_evar</span> <span class="id" type="var">S</span>; <span class="id" type="tactic">first</span> [ <span class="id" type="var">k</span> <span class="id" type="var">sym</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <span class="id" type="keyword">match</span> <span class="id" type="var">S</span> <span class="id" type="keyword">with</span> @<a class="idref" href="MathClasses.interfaces.canonical_names.html#equiv"><span class="id" type="definition">equiv</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> ⇒ <span class="id" type="tactic">idtac</span> <span class="id" type="keyword">end</span>; <span class="id" type="tactic">first</span> [<span class="id" type="var">k</span> <span class="id" type="var">true</span> | <span class="id" type="tactic">fail</span> 2]<br/>
&nbsp;&nbsp;| <span class="id" type="keyword">let</span> <span class="id" type="var">fpsym</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">_</span>:<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> <span class="id" type="var">S</span>) <span class="id" type="keyword">in</span> <span class="id" type="tactic">first</span> [ <span class="id" type="var">k</span> <span class="id" type="var">true</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <span class="id" type="var">k</span> <span class="id" type="var">false</span><br/>
&nbsp;&nbsp;].<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">compare_tail_rel</span> <span class="id" type="var">sym</span> <span class="id" type="var">R</span> <span class="id" type="var">S</span> <span class="id" type="var">k</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="tactic">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">sym</span> <span class="id" type="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a> ⇒ <span class="id" type="tactic">idtac</span> <span class="id" type="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">is_evar</span> <span class="id" type="var">S</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">first</span> [ <span class="id" type="var">has_evar</span> <span class="id" type="var">R</span>; <span class="id" type="tactic">fail</span> 1 <br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="keyword">let</span> <span class="id" type="var">fpsym</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">_</span>:<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Symmetric"><span class="id" type="class">Find_Proper_Symmetric</span></a> <span class="id" type="var">R</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">unify</span> <span class="id" type="var">S</span> <span class="id" type="var">R</span>; <span class="id" type="tactic">first</span> [ <span class="id" type="var">k</span> <span class="id" type="var">true</span> | <span class="id" type="tactic">fail</span> 3 ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="keyword">let</span> <span class="id" type="var">R'</span> := <span class="id" type="keyword">match</span> <span class="id" type="var">R</span> <span class="id" type="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Program.Basics.html#flip"><span class="id" type="definition">flip</span></a> ?<span class="id" type="var">R'</span> ⇒ <span class="id" type="var">R'</span> | <span class="id" type="var">_</span> ⇒ <span class="id" type="var">R</span> <span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">ppo</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">_</span>:<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_PrePartialOrder"><span class="id" type="class">Find_Proper_PrePartialOrder</span></a> <span class="id" type="var">_</span> <span class="id" type="var">R'</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">Rsym</span> := <span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">ppo</span> <span class="id" type="keyword">with</span> <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_PrePartialOrder"><span class="id" type="class">Find_Proper_PrePartialOrder</span></a> ?<span class="id" type="var">Rsym</span> <span class="id" type="var">_</span> ⇒ <span class="id" type="var">Rsym</span> <span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">unify</span> <span class="id" type="var">S</span> <span class="id" type="var">Rsym</span>; <span class="id" type="tactic">first</span> [ <span class="id" type="var">k</span> <span class="id" type="var">true</span> | <span class="id" type="tactic">fail</span> 3 ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
&nbsp;&nbsp;| <span class="id" type="var">compare_rel</span> <span class="id" type="var">false</span> <span class="id" type="var">S</span> <span class="id" type="var">R</span> <span class="id" type="var">k</span><br/>
&nbsp;&nbsp;].<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">compare_sigs</span> <span class="id" type="var">n</span> <span class="id" type="var">R</span> <span class="id" type="var">R'</span> <span class="id" type="var">k</span> :=<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">rec</span> <span class="id" type="var">cmp</span> <span class="id" type="var">sym</span> <span class="id" type="var">R</span> <span class="id" type="var">R'</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">R</span> <span class="id" type="var">R'</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (?<span class="id" type="var">R1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;?</span></a><span class="id" type="var">R2</span>)%<span class="id" type="var">signature</span> (?<span class="id" type="var">R1'</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;?</span></a><span class="id" type="var">R2'</span>)%<span class="id" type="var">signature</span> ⇒ <span class="id" type="tactic">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">k'</span> <span class="id" type="var">sym</span> := <span class="id" type="var">cmp</span> <span class="id" type="var">sym</span> <span class="id" type="var">R2</span> <span class="id" type="var">R2'</span> <span class="id" type="keyword">in</span> <span class="id" type="var">compare_rel</span> <span class="id" type="var">sym</span> <span class="id" type="var">R1</span> <span class="id" type="var">R1'</span> <span class="id" type="var">k'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="keyword">let</span> <span class="id" type="var">k'</span> <span class="id" type="var">sym</span> := <span class="id" type="var">k</span> <span class="id" type="var">n</span> <span class="id" type="keyword">in</span> <span class="id" type="var">compare_tail_rel</span> <span class="id" type="var">sym</span> <span class="id" type="var">R</span> <span class="id" type="var">R'</span> <span class="id" type="var">k'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="keyword">let</span> <span class="id" type="var">rec</span> <span class="id" type="var">chop</span> <span class="id" type="var">n</span> <span class="id" type="var">R</span> <span class="id" type="var">R'</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a> ⇒ <span class="id" type="var">cmp</span> <span class="id" type="var">true</span> <span class="id" type="var">R</span> <span class="id" type="var">R'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> ?<span class="id" type="var">m</span> ⇒ <span class="id" type="keyword">match</span> <span class="id" type="var">R</span> <span class="id" type="keyword">with</span> (?<span class="id" type="var">R1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;?</span></a><span class="id" type="var">R2</span>)%<span class="id" type="var">signature</span> ⇒ <span class="id" type="var">chop</span> <span class="id" type="var">m</span> <span class="id" type="var">R2</span> <span class="id" type="var">R'</span> <span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">chop</span> <span class="id" type="var">n</span> <span class="id" type="var">R</span> <span class="id" type="var">R'</span> .<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">trim_apps</span> <span class="id" type="var">n</span> <span class="id" type="var">expr</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a> ⇒ <span class="id" type="var">expr</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> ?<span class="id" type="var">m</span> ⇒ <span class="id" type="keyword">match</span> <span class="id" type="var">expr</span> <span class="id" type="keyword">with</span> ?<span class="id" type="var">f</span> <span class="id" type="var">_</span> ⇒ <span class="id" type="var">trim_apps</span> <span class="id" type="var">m</span> <span class="id" type="var">f</span> <span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">count_len</span> <span class="id" type="var">R</span> <span class="id" type="var">k</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">R</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| (?<span class="id" type="var">R1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">?</span></a><span class="id" type="var">R2</span>)%<span class="id" type="var">signature</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">first</span> [ <span class="id" type="keyword">let</span> <span class="id" type="var">k'</span> <span class="id" type="var">n</span> := <span class="id" type="var">k</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">count_len</span> <span class="id" type="var">R2</span> <span class="id" type="var">k'</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="var">k</span> 0%<span class="id" type="var">nat</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">compare_len</span> <span class="id" type="var">R</span> <span class="id" type="var">Sig</span> <span class="id" type="var">k</span> <span class="id" type="var">kfail</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">R</span> <span class="id" type="var">Sig</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (?<span class="id" type="var">R1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">?</span></a><span class="id" type="var">R2</span>)%<span class="id" type="var">signature</span> (?<span class="id" type="var">S1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">?</span></a><span class="id" type="var">S2</span>)%<span class="id" type="var">signature</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">first</span> [ <span class="id" type="var">compare_len</span> <span class="id" type="var">R2</span> <span class="id" type="var">S2</span> <span class="id" type="var">k</span> <span class="id" type="var">kfail</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> <span class="id" type="var">_</span> (?<span class="id" type="var">S1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">?</span></a><span class="id" type="var">S2</span>)%<span class="id" type="var">signature</span> ⇒ <span class="id" type="var">kfail</span> 1<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" type="constructor">pair</span></a> (?<span class="id" type="var">R1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">++&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#ProperNotations.:signature_scope:x_'++>'_x"><span class="id" type="notation">?</span></a><span class="id" type="var">R2</span>)%<span class="id" type="var">signature</span> <span class="id" type="var">_</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">first</span> [ <span class="id" type="keyword">let</span> <span class="id" type="var">k'</span> <span class="id" type="var">n</span> := <span class="id" type="var">k</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">count_len</span> <span class="id" type="var">R2</span> <span class="id" type="var">k'</span> | <span class="id" type="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <span class="id" type="var">k</span> 0%<span class="id" type="var">nat</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">compare_expr</span> <span class="id" type="var">p</span> <span class="id" type="var">k</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> ?<span class="id" type="var">s</span> ?<span class="id" type="var">e</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span> |- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> ?<span class="id" type="var">sg</span> ?<span class="id" type="var">eg</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">too_short</span> <span class="id" type="var">_</span> :=  <span class="id" type="tactic">fail</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">with_len</span> <span class="id" type="var">n</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">eg'</span> := <span class="id" type="var">trim_apps</span> <span class="id" type="var">n</span> <span class="id" type="var">eg</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">unify</span> <span class="id" type="var">eg'</span> <span class="id" type="var">e</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">s'</span>  := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">s</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">sg'</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">sg</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">compare_sigs</span> <span class="id" type="var">n</span> <span class="id" type="var">s'</span> <span class="id" type="var">sg'</span> <span class="id" type="var">k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">compare_len</span> <span class="id" type="var">s</span> <span class="id" type="var">sg</span> <span class="id" type="var">with_len</span> <span class="id" type="var">too_short</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">rebuild</span> <span class="id" type="var">p</span> <span class="id" type="var">pa</span> <span class="id" type="var">k</span> :=<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">t'</span> := <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">pa</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">t</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">t'</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">P</span> := <span class="id" type="tactic">fresh</span> "P" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> <span class="id" type="var">t</span> <span class="id" type="keyword">as</span> <span class="id" type="var">P</span> <span class="id" type="tactic">by</span> (<span class="id" type="tactic">first</span> [<span class="id" type="var">class_apply</span> <span class="id" type="var">p</span>; <span class="id" type="tactic">apply</span> <span class="id" type="var">_</span> | <span class="id" type="tactic">apply</span> <span class="id" type="var">p</span>; <span class="id" type="tactic">apply</span> <span class="id" type="var">_</span> ]); <span class="id" type="tactic">instantiate</span>;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">P'</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">P</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" type="var">k</span> <span class="id" type="var">P'</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">head_of</span> <span class="id" type="var">x</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">x</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| ?<span class="id" type="var">f</span> <span class="id" type="var">_</span> ⇒ <span class="id" type="var">head_of</span> <span class="id" type="var">f</span><br/>
&nbsp;&nbsp;| ?<span class="id" type="var">h</span> ⇒ <span class="id" type="var">h</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">apply_evars</span> <span class="id" type="var">p</span> <span class="id" type="var">k</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> ⇒ <span class="id" type="var">k</span> <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">(</span></a><span class="id" type="var">x</span>:?<span class="id" type="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Unicode.Utf8_core.html#:type_scope:'∀'_x_'..'_x_','_x"><span class="id" type="notation">),</span></a> <span class="id" type="var">_</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">x</span> := <span class="id" type="tactic">fresh</span> "x" <span class="id" type="keyword">in</span> <span class="id" type="tactic">evar</span> (<span class="id" type="var">x</span>:<span class="id" type="var">A</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">x'</span> := <span class="id" type="tactic">eval</span> <span class="id" type="tactic">unfold</span> <span class="id" type="var">x</span> <span class="id" type="keyword">in</span> <span class="id" type="var">x</span> <span class="id" type="keyword">in</span> <span class="id" type="tactic">clear</span> <span class="id" type="var">x</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">p'</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">p</span> <span class="id" type="var">x'</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">apply_evars</span> <span class="id" type="var">p'</span> <span class="id" type="var">k</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">find_proper</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="keyword">goal</span> <span class="id" type="keyword">with</span> |- @<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> <span class="id" type="var">_</span> ?<span class="id" type="var">sig</span> ?<span class="id" type="var">expr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">h</span> := <span class="id" type="var">head_of</span> <span class="id" type="var">expr</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">rec</span> <span class="id" type="var">loop</span> <span class="id" type="var">i</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">s</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">_</span>:<a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Signature"><span class="id" type="class">Find_Proper_Signature</span></a> <span class="id" type="var">h</span> <span class="id" type="var">i</span> <span class="id" type="var">_</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">s</span> <span class="id" type="keyword">with</span> <a class="idref" href="MathClasses.misc.find_proper.html#Find_Proper_Signature"><span class="id" type="class">Find_Proper_Signature</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> ?<span class="id" type="var">T</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">p</span> := <span class="id" type="keyword">constr</span>:(<a class="idref" href="MathClasses.misc.find_proper.html#find_proper_sig"><span class="id" type="definition">find_proper_sig</span></a> <span class="id" type="var">s</span> : <span class="id" type="var">T</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">do_conv</span> <span class="id" type="var">p</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">compare_tails</span> <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="keyword">let</span> <span class="id" type="var">do_cmp</span> <span class="id" type="var">pevars</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">do_inst</span> <span class="id" type="var">n</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">pe</span> := <span class="id" type="keyword">constr</span>:(<span class="id" type="var">pevars</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">do_partial</span> <span class="id" type="var">pa</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">p</span> := <span class="id" type="var">trim_proper</span> <span class="id" type="var">n</span> <span class="id" type="var">pa</span> <span class="id" type="var">expr</span> <span class="id" type="keyword">in</span> <span class="id" type="var">do_conv</span> <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">rebuild</span> <span class="id" type="var">p</span> <span class="id" type="var">pe</span> <span class="id" type="var">do_partial</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">compare_expr</span> <span class="id" type="var">pevars</span> <span class="id" type="var">do_inst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">apply_evars</span> <span class="id" type="var">p</span> <span class="id" type="var">do_cmp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|  <span class="id" type="var">loop</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">i</span>) ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">loop</span> <span class="id" type="var">O</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Hint Extern</span> 0 (@<a class="idref" href="http://coq.inria.fr/distrib/8.4pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" type="class">Proper</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>) ⇒ <span class="id" type="var">find_proper</span> : <span class="id" type="var">typeclass_instances</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>